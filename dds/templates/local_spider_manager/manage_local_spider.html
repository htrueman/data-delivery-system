{% extends 'base.html' %}

{% block content %}
    <div class="back-btn">
        <a href="{% url 'local_spider_manager:list' %}"><< Back to cloned repos</a>
    </div>
    <div class="subheader">
        Managing git repo, url: <a href="{{ object.deep_link }}">{{ object.deep_link }}</a>
    </div>
    <div class="row">
        {% if not controller.project_setup_bash_file %}
        <div class="ctrl-extra-data col-md-12">
        <form enctype="multipart/form-data" id="ctrl-form" class="col-md-8">
            <div class="form-group">
                <label
                        class="ctrl-form-input"
                        for="setup-commands-textarea"
                >Write down bash setup commands for current project</label>
                <textarea
                        name="setup_commands"
                        id="setup-commands-textarea"
                        class="form-control"
                ></textarea>
            </div>
            <div class="form-group ctrl-form-divider">
                OR
            </div>
            <div class="form-group">
                <label
                        class="ctrl-form-input"
                        for="setup-commands-file"
                >Load bash file with setup commands for current project</label>
                <input type="file" name="setup_commands_file" class="form-control" id="setup-commands-file">
            </div>
            <div class="ctrl-btns">
                <input type="button" class="btn bg-success ctrl-btn" id="run-spider" value="Run">
                <input type="button" class="btn bg-danger ctrl-btn" id="stop-spider" value="Stop">
            </div>
        </form>
        </div>
        {% else %}
            <div class="logs col-md-6">
            </div>
            <div class="sh-content col-md-6">
                {{ controller_bash_content|linebreaks }}
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block extra_js %}
    <script>
        const controllerId = '{{ controller.id }}';
        const runSpiderPath = '{% url "local_spider_manager:api:controller" %}';
    </script>
{% endblock %}
